(this["webpackJsonpperformance-optimization"]=this["webpackJsonpperformance-optimization"]||[]).push([[8],{435:function(e,n,t){},436:function(e,n,t){},437:function(e,n,t){},788:function(e,n,t){"use strict";t.r(n);var r=t(93),a=t.n(r),c=t(279),i=t(3),o=(t(435),t(784)),s=t(28),u=t(88),l=(t(436),t(0)),b=t(770),j=t(785),d=t(766),f=t(786),m=(t(437),t(767)),p=t(1);function O(e){var n=e.content,t=e.startLine,r=e.endLine,a=Object(l.useRef)(null);function c(e){e&&"number"===typeof t&&"number"===typeof r&&(t>r||setTimeout((function(){e.deltaDecorations([],[{range:new m.b.Range(t,1,r,1),options:{isWholeLine:!0,className:"editor--hightlight"}}]),e.revealLineInCenter(Math.ceil((t+r)/2))}),300))}return Object(l.useEffect)((function(){c(a.current)}),[n,t,r]),Object(p.jsx)("div",{className:"editor",children:Object(p.jsx)(m.a,{language:"javascript",theme:"vs",value:n,options:{readOnly:!0},editorDidMount:function(e){a.current=e,c(a.current)}})})}var h=Object(l.memo)(O);function v(e){var n=e.name,t=e.desc,r=e.code,a=e.startLine,c=e.endLine,i=e.onTrigger,o=e.onAnalyze,m=e.onInputChange,O=e.errorInfo,v=e.errorResult,x=Object(l.useState)(1),_=Object(u.a)(x,2),g=_[0],y=_[1];function N(e){var t=e.target,r=t.id,a=t.value;"function"===typeof m&&m(n,Object(s.a)({},r,a))}function w(e){if(!(null===O||void 0===O?void 0:O.error))return b.b.warning("\u8bf7\u5148\u89e6\u53d1\u9519\u8bef.");var n=null===O||void 0===O?void 0:O.error.split("\n"),t=n[g],r=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i.exec(t),a=Object(u.a)(r,5),c=a[2],i=a[3],o=a[4];return N({target:{id:"url",value:c}}),N({target:{id:"lineNo",value:i}}),N({target:{id:"columnNo",value:o}}),e&&g>=n.length-1?b.b.warning("\u5df2\u662f\u6700\u540e\u4e00\u4e2a\u9519\u8bef."):!e&&g<=1?b.b.warning("\u5df2\u662f\u7b2c\u4e00\u4e2a\u9519\u8bef."):void y(e?g+1:g-1)}return Object(p.jsxs)("div",{className:"errortab",children:[Object(p.jsxs)(j.a,{layout:"vertical",children:[Object(p.jsx)(j.a.Item,{label:"\u7528\u4f8b\u8bf4\u660e",children:t}),Object(p.jsx)(j.a.Item,{label:"\u4ee3\u7801\u793a\u4f8b",children:Object(p.jsx)("div",{className:"errortab__code",children:Object(p.jsx)(h,{content:r,startLine:a,endLine:c},"result")})})]}),Object(p.jsxs)("div",{className:"errortab__info",children:[Object(p.jsxs)("div",{className:"errortab__info__left",children:[Object(p.jsxs)("div",{className:"errortab__info__btn",children:[Object(p.jsx)(d.a,{type:"primary",onClick:function(){"function"===typeof i&&i(n)},children:"\u89e6\u53d1\u9519\u8bef"}),Object(p.jsx)(d.a,{type:"primary",onClick:w.bind(null,!1),children:"\u5b9a\u4f4d\u4e0a\u4e00\u4e2a\u9519\u8bef\u6587\u4ef6"}),Object(p.jsx)(d.a,{type:"primary",onClick:w.bind(null,!0),children:"\u5b9a\u4f4d\u4e0b\u4e00\u4e2a\u9519\u8bef\u6587\u4ef6"})]}),Object(p.jsxs)("div",{className:"errortab__info__btn",children:["\u5f53\u524d\u9519\u8bef\u7d22\u5f15: ",g]}),Object(p.jsxs)(j.a,{children:[Object(p.jsx)(j.a.Item,{label:"\u9519\u8bef\u4fe1\u606f",children:Object(p.jsx)(f.a,{value:O.msg,disabled:!0})}),Object(p.jsx)(j.a.Item,{label:"\u9519\u8bef\u884c\u6570",children:Object(p.jsx)(f.a,{value:O.lineNo,onChange:N,id:"lineNo",disabled:!0})}),Object(p.jsx)(j.a.Item,{label:"\u9519\u8bef\u5217\u6570",children:Object(p.jsx)(f.a,{value:O.columnNo,onChange:N,id:"columnNo",disabled:!0})}),Object(p.jsx)(j.a.Item,{label:"\u9519\u8bef\u6587\u4ef6",children:Object(p.jsx)(f.a,{value:O.url,onChange:N,id:"url",disabled:!0})}),Object(p.jsx)(j.a.Item,{label:"\u9519\u8bef\u5806\u6808",children:Object(p.jsx)(f.a.TextArea,{value:O.error,rows:12,disabled:!0})})]})]}),Object(p.jsxs)("div",{className:"errortab__info__right",children:[Object(p.jsx)("div",{className:"errortab__info__btn",children:Object(p.jsx)(d.a,{type:"primary",onClick:function(){"function"===typeof o&&o(n)},children:"\u89e3\u6790 sourcemap"})}),Object(p.jsx)("div",{className:"errortab__info__edtior",children:Object(p.jsx)(h,{content:v.content,startLine:v.line,endLine:v.line},"result")})]})]})]})}var x=Object(l.memo)(v),_=t(10),g=t(41),y=t(29);function N(e){return w.apply(this,arguments)}function w(){return(w=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return C.apply(this,arguments)}function C(){return(C=Object(c.a)(a.a.mark((function e(n){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("".concat(n.url,".map"));case 2:return t=e.sent,e.abrupt("return",new Promise((function(e){sourceMap.SourceMapConsumer.with(t,null,(function(t){var r=t.originalPositionFor({line:Number(n.lineNo),column:Number(n.columnNo)}),a=t.sourceContentFor(r.source);e(Object(i.a)({content:a},r))}))})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=o.a.TabPane;n.default=function(){console.log("render sourcemap");var e=Object(_.c)((function(e){return e.sourcemap.tabConfigList})),n=Object(_.b)(),t=function(){var e=Object(l.useState)({}),n=Object(u.a)(e,2),t=n[0],r=n[1];return Object(l.useEffect)((function(){window.onerror=function(e,n,t,a,c){return r({msg:e,url:n,lineNo:t,columnNo:a,error:c.stack,name:c.message}),!1},window.onunhandledrejection=function(e){var n=e.reason;r({msg:n.message,url:"",lineNo:"",error:n.stack,name:n.message})}}),[]),{error:t}}(),r=t.error;function s(e){if("test_1"===e)throw new Error("test_1");"test_2"===e&&new Promise((function(){throw new Error("test_2")}))}function b(e){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(a.a.mark((function t(r){var c,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.find((function(e){return e.key===r})),t.next=3,k(c.errorInfo);case 3:o=t.sent,n(Object(g.b)({key:r,props:{errorResult:Object(i.a)({},o)}}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(e,t){n(Object(g.c)({key:r.name,props:t}))}return Object(l.useEffect)((function(){n(Object(g.b)({key:r.name,props:{errorInfo:Object(i.a)({},r)}}))}),[r]),Object(p.jsxs)("div",{className:"sourcemap",children:[Object(p.jsxs)("div",{className:"sourcemap__desc",children:[Object(p.jsx)("h1",{children:"\u8bf4\u660e"}),Object(p.jsx)("p",{children:"\u6b64\u9875\u9762\u4ec5\u7528\u4e8e\u6d4b\u8bd5 source map \u529f\u80fd\u3002"})]}),Object(p.jsx)(o.a,{defaultActiveKey:"test_1",className:"sourcemap__test",children:e.map((function(e){return Object(p.jsx)(I,{tab:e.name,children:Object(p.jsx)(x,Object(i.a)(Object(i.a)({},e),{},{name:e.key,onTrigger:s,onAnalyze:b,onInputChange:d}))},e.key)}))})]})}}}]);