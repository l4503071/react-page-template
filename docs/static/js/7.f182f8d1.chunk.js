(this["webpackJsonpperformance-optimization"]=this["webpackJsonpperformance-optimization"]||[]).push([[7],{429:function(e,t,n){},430:function(e,t,n){},436:function(e,t,n){},440:function(e,t,n){},441:function(e,t,n){},442:function(e,t,n){},799:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return q}));var c=n(0),r=n(10),i=n(46),a=n(97),s=(n(429),n(3)),o=n(419),l=n(109),u=n.n(l),b=n(774),d=n(35);n(430);var f=n(1),j=["src","className","lazy","onLoad","width","height"];function h(e){var t=e.src,n=e.className,r=e.lazy,i=e.onLoad,l=e.width,h=e.height,v=Object(o.a)(e,j),O=Object(c.useState)(!r),p=Object(a.a)(O,2),m=p[0],_=p[1],x=Object(c.useState)(!0),g=Object(a.a)(x,2),N=g[0],k=g[1],w=Object(c.useRef)(null);function y(){_(!0)}Object(c.useEffect)((function(){var e;return r&&(e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!Object(d.a)())return t(),console.warn("\u8be5\u73af\u5883\u4e0d\u652f\u6301 IntersectionObserver\uff0c\u56fe\u7247\u61d2\u52a0\u8f7d\u529f\u80fd\u5931\u6548\u3002");var n=new IntersectionObserver((function(c){c.forEach((function(c){c.intersectionRatio<=0||(t(),n.unobserve(e))}))}));return n.observe(e),n}(w.current,y)),function(){e&&w.current&&e.unobserve(w.current)}}),[r]);var E=u()(n,"image__real",{"image__real--hidden":N}),L=Object(f.jsx)("img",Object(s.a)({src:t,style:{width:l,height:h},onLoad:function(){k(!1),i()},className:E,alt:"img"},v));return Object(f.jsxs)("div",{ref:w,className:"image",children:[m&&L,N&&Object(f.jsx)(b.a,{hash:"LEHV6nWB2yk8pyo0adR*.7kCMdnj",width:l,height:h})]})}h.defaultProps={onLoad:function(){}};var v=Object(c.memo)(h),O=n(9),p=n.n(O),m=["children","onAppear","onDisappear","firstAppear","firstDisappear"];function _(e){var t=function(t){var n=t.children,r=t.onAppear,i=t.onDisappear,a=t.firstAppear,l=t.firstDisappear,u=Object(o.a)(t,m),b=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=b.current;return e.addEventListener("appear",r),e.addEventListener("disappear",i),e.setAttribute("data-appear-once",a),e.setAttribute("data-disappear-once",l),function(){e.removeEventListener("appear",r),e.removeEventListener("disappear",i)}}),[]),Object(c.createElement)(e,Object(s.a)(Object(s.a)({},u),{},{ref:b}),n)};return t.displayName="appear_".concat(e),t.propTypes={children:p.a.node,onAppear:p.a.func,onDisappear:p.a.func,firstAppear:p.a.bool,firstDisappear:p.a.bool},t.defaultProps={onAppear:function(){},onDisappear:function(){},firstAppear:!1,firstDisappear:!1},t}var x=_("div"),g=n(32),N=n(28),k=n(29),w=new(function(){function e(){Object(N.a)(this,e),this.subscribers=[],this.list=[]}return Object(k.a)(e,[{key:"subscribe",value:function(e){this.subscribers.push(e)}},{key:"unsubscribe",value:function(e){var t=this.subscribers.findIndex((function(t){return t===e}));t>=0&&this.subscribers.splice(t,1)}},{key:"trigger",value:function(){var e=this;this.subscribers.forEach((function(t){return t(e.list)}))}},{key:"push",value:function(e){this.list=[].concat(Object(g.a)(this.list),[e]),this.trigger()}}]),e}());function y(e){w.push({time:Date.now(),msg:"\u7d22\u5f15(".concat(e.index,") \u51fa\u73b0\u4e86")})}function E(){}var L=n(801);function A(e){var t=e.url,n=e.creator,r=e.labels,i=e.eventData;console.log("render card");var s=Object(c.useState)(!1),o=Object(a.a)(s,2),l=o[0],u=o[1];return Object(f.jsxs)(x,{className:"card",onAppear:y.bind(null,i),onDisappear:E.bind(null,i),children:[Object(f.jsx)(L.a.Ribbon,{text:i.index,color:"magenta",children:Object(f.jsxs)("div",{className:"card__top",children:[Object(f.jsx)(v,{src:t,onLoad:function(){u(!0)},width:300,height:300,lazy:!0}),l&&Object(f.jsxs)("div",{className:"card__mask",children:[Object(f.jsx)("div",{className:"card__creator",title:n,children:n.slice(0,1)}),Object(f.jsx)("div",{className:"card__download",onClick:function(){return Object(d.b)(t)},children:Object(f.jsx)("svg",{width:"32",height:"32",className:"c_c7b",viewBox:"0 0 32 32",version:"1.1","aria-hidden":"false",children:Object(f.jsx)("path",{d:"M25.8 15.5l-7.8 7.2v-20.7h-4v20.7l-7.8-7.2-2.7 3 12.5 11.4 12.5-11.4z"})})})]})]})}),Object(f.jsx)("div",{className:"card__labels",children:r.map((function(e){return Object(f.jsx)("span",{className:"card__labels__item",children:e},e)}))})]})}var C=Object(c.memo)(A),D=(n(436),n(798)),R=n(775);function S(e){var t=e.onClick,n=e.onChange;return console.log("render filter"),Object(f.jsxs)("div",{className:"filter",children:[Object(f.jsx)(D.a,{style:{width:400},onChange:n,placeholder:"\u8bf7\u8f93\u5165\u8fc7\u6ee4\u9009\u9879"}),Object(f.jsx)(R.a,{style:{marginLeft:8},onClick:t,children:"\u6362\u4e00\u6279"})]})}var z=Object(c.memo)(S),M=n(803),I=n(324),P=n(804),B=n(782);n(440);function J(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],r=t[1],i=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){w.subscribe(r)}),[]),{list:n}}(),s=i.list,o=Object(c.useRef)(null);Object(c.useEffect)((function(){o.current.scrollToItem(s.length)}),[s]);var l=u()("track__content",{"track__content--visible":n,"track__content--hidden":!n});return Object(f.jsxs)("div",{className:"track",children:[Object(f.jsxs)("div",{className:l,children:[Object(f.jsx)(I.a,{className:"track__close",onClick:function(){r(!1)}}),Object(f.jsx)(B.a,{ref:o,height:260,itemCount:s.length,itemSize:30,width:300,children:function(e){var t=e.index,n=e.style,c=t%2===0?"track__content__item--odd":"";return Object(f.jsxs)("div",{className:c+" track__content__item",style:n,children:[Object(f.jsx)("div",{children:Object(d.c)(s[t].time)}),Object(f.jsx)("div",{children:s[t].msg})]})}})]}),Object(f.jsx)(M.a,{icon:Object(f.jsx)(P.a,{}),color:"processing",className:"track__btn",onClick:function(){r((function(e){return!e}))},children:"\u57cb\u70b9"})]})}var T=Object(c.memo)(J),H=n(21),V=(n(441),!1);function W(e){var t=e.loadMore,n=e.children,r=Object(c.useRef)(null),i=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=function(e){function t(){V=!0}return e.addEventListener("scroll",t),{removeScrollListener:function(){V=!1,e.removeEventListener("scroll",t)}}}(i.current).removeScrollListener,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio<=0||!V||t()}))}));return n.observe(e),{unobserve:function(){n.unobserve(e)}}}(r.current,t),c=n.unobserve;return function(){e(),c()}}),[]),Object(f.jsxs)("div",{ref:i,className:"infinite-scroll",children:[Object(f.jsx)("div",{className:"infinite-scroll__content",children:n}),Object(f.jsx)("div",{ref:r,className:"infinite-scroll__load-more"})]})}W.defaultProps={loadMore:function(){}};n(442);function q(){console.log("render home");var e=Object(r.c)(Object(c.useMemo)((function(){return Object(H.a)((function(e){return e.home.cardList}),(function(e){return e.home.filter}),(function(e,t){return e.filter((function(e){return e.labels.join("").includes(t)}))}))}),[])),t=Object(r.b)();Object(c.useEffect)((function(){t(Object(i.b)())}),[i.b]);var n=Object(c.useCallback)((function(e){t(Object(i.c)({filter:e.target.value}))}),[t]);return Object(f.jsxs)("div",{className:"home",children:[Object(f.jsx)("div",{className:"home__filter",children:Object(f.jsx)(z,{onClick:function(){t(Object(i.b)())},onChange:n})}),Object(f.jsx)("div",{className:"home__card",children:Object(f.jsxs)(W,{loadMore:function(){t(Object(i.b)({append:!0}))},onAppear:function(){},children:[Object(f.jsxs)("div",{className:"home__card__list",children:[e.map((function(e,t){return Object(f.jsx)(C,{creator:e.creator,url:e.url,labels:e.labels,eventData:{url:e.url,index:t}},e.url)})),Array(10).fill(!0).map((function(e,t){return Object(f.jsx)("div",{style:{width:"316px",height:0}},t)}))]}),e.length>0&&Object(f.jsx)("div",{className:"home__card__loading",children:"loading..."})]})}),Object(f.jsx)(T,{})]})}}}]);