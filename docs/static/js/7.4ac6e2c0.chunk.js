(this["webpackJsonpperformance-optimization"]=this["webpackJsonpperformance-optimization"]||[]).push([[7],{279:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return u}));var r=n(97),o=n.n(r),c=n(239),a=n(17);function i(t){return s.apply(this,arguments)}function s(){return(s=Object(c.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.get(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(t){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(o.a.mark((function t(e){var n,r,c,a,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.split("/").pop().split("?")[0],t.next=3,fetch(e);case 3:return r=t.sent,t.next=6,r.blob();case 6:c=t.sent,a=URL.createObjectURL(c),(i=document.createElement("a")).href=a,i.download=n,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},424:function(t,e,n){},425:function(t,e,n){},426:function(t,e,n){},435:function(t,e,n){},436:function(t,e,n){},789:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return Q}));var r=n(0),o=n(10),c=n(43),a=n(93),i=(n(424),n(3));function s(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},c=Object.keys(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var u=n(106),l=n.n(u),h=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],f=function(t){for(var e=0,n=0;n<t.length;n++){var r=t[n];e=83*e+h.indexOf(r)}return e},d=function(t){var e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},p=function(t){var e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.round(12.92*e*255+.5):Math.round(255*(1.055*Math.pow(e,1/2.4)-.055)+.5)},b=function(t,e){return(t<0?-1:1)*Math.pow(Math.abs(t),e)},j=n(26),v=n(28),O=n(29),m=n(194),y=function(t){Object(v.a)(n,t);var e=Object(O.a)(n);function n(t){var r;return Object(j.a)(this,n),(r=e.call(this,t)).name="ValidationError",r.message=t,r}return n}(Object(m.a)(Error)),g=function(t){if(!t||t.length<6)throw new y("The blurhash string must be at least 6 characters");var e=f(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new y("blurhash length mismatch: length is ".concat(t.length," but it should be ").concat(4+2*r*n))},w=function(t){var e=t>>8&255,n=255&t;return[d(t>>16),d(e),d(n)]},_=function(t,e){var n=Math.floor(t/361),r=Math.floor(t/19)%19,o=t%19;return[b((n-9)/9,2)*e,b((r-9)/9,2)*e,b((o-9)/9,2)*e]},x=function(t,e,n,r){g(t),r|=1;for(var o=f(t[0]),c=Math.floor(o/9)+1,a=o%9+1,i=(f(t[1])+1)/166,s=new Array(a*c),u=0;u<s.length;u++)if(0===u){var l=f(t.substring(2,6));s[u]=w(l)}else{var h=f(t.substring(4+2*u,6+2*u));s[u]=_(h,i*r)}for(var d=4*e,b=new Uint8ClampedArray(d*n),j=0;j<n;j++)for(var v=0;v<e;v++){for(var O=0,m=0,y=0,x=0;x<c;x++)for(var M=0;M<a;M++){var P=Math.cos(Math.PI*v*M/e)*Math.cos(Math.PI*j*x/n),N=s[M+x*a];O+=N[0]*P,m+=N[1]*P,y+=N[2]*P}var E=p(O),k=p(m),L=p(y);b[4*v+0+j*d]=E,b[4*v+1+j*d]=k,b[4*v+2+j*d]=L,b[4*v+3+j*d]=255}return b},M=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(){return P=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},P.apply(this,arguments)},N=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.handleRef=function(t){e.canvas=t,e.draw()},e.draw=function(){var t=e.props,n=t.hash,r=t.height,o=t.punch,c=t.width;if(e.canvas){var a=x(n,c,r,o),i=e.canvas.getContext("2d"),s=i.createImageData(c,r);s.data.set(a),i.putImageData(s,0,0)}},e}return M(e,t),e.prototype.componentDidUpdate=function(){this.draw()},e.prototype.render=function(){var t=this.props,e=(t.hash,t.height),n=t.width,o=N(t,["hash","height","width"]);return r.createElement("canvas",P({},o,{height:e,width:n,ref:this.handleRef}))},e.defaultProps={height:128,width:128},e}(r.PureComponent),k=E,L=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(){return C=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},C.apply(this,arguments)},R=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},I={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return L(e,t),e.prototype.componentDidUpdate=function(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")},e.prototype.render=function(){var t=this.props,e=t.hash,n=t.height,o=t.width,c=t.punch,a=t.resolutionX,i=t.resolutionY,s=t.style,u=R(t,["hash","height","width","punch","resolutionX","resolutionY","style"]);return r.createElement("div",C({},u,{style:C(C({display:"inline-block",height:n,width:o},s),{position:"relative"})}),r.createElement(k,{hash:e,height:i,width:a,punch:c,style:I}))},e.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32},e}(r.PureComponent),z=S;function U(){var t="IntersectionObserver";return t in window&&"".concat(t,"Entry")in window}n(425);var A=n(1),X=["src","className","lazy","onLoad","width","height"];function Y(t){var e=t.src,n=t.className,o=t.lazy,c=t.onLoad,u=t.width,h=t.height,f=s(t,X),d=Object(r.useState)(!o),p=Object(a.a)(d,2),b=p[0],j=p[1],v=Object(r.useState)(!0),O=Object(a.a)(v,2),m=O[0],y=O[1],g=Object(r.useRef)(null);function w(){j(!0)}Object(r.useEffect)((function(){var t;return o&&(t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!U())return e(),console.warn("\u8be5\u73af\u5883\u4e0d\u652f\u6301 IntersectionObserver\uff0c\u56fe\u7247\u61d2\u52a0\u8f7d\u529f\u80fd\u5931\u6548\u3002");var n=new IntersectionObserver((function(r){r.forEach((function(r){r.intersectionRatio<=0||(e(),n.unobserve(t))}))}));return n.observe(t),n}(g.current,w)),function(){t&&g.current&&t.unobserve(g.current)}}),[o]);var _=l()(n,"image__real",{"image__real--hidden":m}),x=Object(A.jsx)("img",Object(i.a)({src:e,style:{width:u,height:h},onLoad:function(){y(!1),c()},className:_,alt:"img"},f));return Object(A.jsxs)("div",{ref:g,className:"image",children:[b&&x,m&&Object(A.jsx)(z,{hash:"LEHV6nWB2yk8pyo0adR*.7kCMdnj",width:u,height:h})]})}Y.defaultProps={onLoad:function(){}};var D=Object(r.memo)(Y),B=n(279);function J(t){var e=t.url,n=t.creator,o=t.labels;console.log("render card");var c=Object(r.useState)(!1),i=Object(a.a)(c,2),s=i[0],u=i[1];return Object(A.jsxs)("div",{className:"card",children:[Object(A.jsxs)("div",{className:"card__top",children:[Object(A.jsx)(D,{src:e,onLoad:function(){u(!0)},width:300,height:300,lazy:!0}),s&&Object(A.jsxs)("div",{className:"card__mask",children:[Object(A.jsx)("div",{className:"card__creator",title:n,children:n.slice(0,1)}),Object(A.jsx)("div",{className:"card__download",onClick:function(){return Object(B.a)(e)},children:Object(A.jsx)("svg",{width:"32",height:"32",className:"c_c7b",viewBox:"0 0 32 32",version:"1.1","aria-hidden":"false",children:Object(A.jsx)("path",{d:"M25.8 15.5l-7.8 7.2v-20.7h-4v20.7l-7.8-7.2-2.7 3 12.5 11.4 12.5-11.4z"})})})]})]}),Object(A.jsx)("div",{className:"card__labels",children:o.map((function(t){return Object(A.jsx)("span",{className:"card__labels__item",children:t},t)}))})]})}var V=Object(r.memo)(J),H=(n(426),n(790)),T=n(768);function W(t){var e=t.onClick,n=t.onChange;return console.log("render filter"),Object(A.jsxs)("div",{className:"filter",children:[Object(A.jsx)(H.a,{style:{width:400},onChange:n,placeholder:"\u8bf7\u8f93\u5165\u8fc7\u6ee4\u9009\u9879"}),Object(A.jsx)(T.a,{style:{marginLeft:8},onClick:e,children:"\u6362\u4e00\u6279"})]})}var q=Object(r.memo)(W),F=n(20),G=(n(435),!1);function K(t){var e=t.loadMore,n=t.children,o=Object(r.useRef)(null),c=Object(r.useRef)(null);return Object(r.useEffect)((function(){var t=function(t){function e(){G=!0}return t.addEventListener("scroll",e),{removeScrollListener:function(){G=!1,t.removeEventListener("scroll",e)}}}(c.current).removeScrollListener,n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=new IntersectionObserver((function(t){t.forEach((function(t){t.intersectionRatio<=0||!G||e()}))}));return n.observe(t),{unobserve:function(){n.unobserve(t)}}}(o.current,e),r=n.unobserve;return function(){t(),r()}}),[]),Object(A.jsxs)("div",{ref:c,className:"infinite-scroll",children:[Object(A.jsx)("div",{className:"infinite-scroll__content",children:n}),Object(A.jsx)("div",{ref:o,className:"infinite-scroll__load-more"})]})}K.defaultProps={loadMore:function(){}};n(436);function Q(){console.log("render home");var t=Object(o.c)(Object(r.useMemo)((function(){return Object(F.a)((function(t){return t.home.cardList}),(function(t){return t.home.filter}),(function(t,e){return t.filter((function(t){return t.labels.join("").includes(e)}))}))}),[])),e=Object(o.b)();Object(r.useEffect)((function(){e(Object(c.b)())}),[c.b]);var n=Object(r.useCallback)((function(t){e(Object(c.c)({filter:t.target.value}))}),[e]);return Object(A.jsxs)("div",{className:"home",children:[Object(A.jsx)("div",{className:"home__filter",children:Object(A.jsx)(q,{onClick:function(){e(Object(c.b)())},onChange:n})}),Object(A.jsx)("div",{className:"home__card",children:Object(A.jsxs)(K,{loadMore:function(){e(Object(c.b)({append:!0}))},children:[Object(A.jsxs)("div",{className:"home__card__list",children:[t.map((function(t){return Object(A.jsx)(V,{creator:t.creator,url:t.url,labels:t.labels},t.url)})),Array(10).fill(!0).map((function(t,e){return Object(A.jsx)("div",{style:{width:"316px",height:0}},e)}))]}),t.length>0&&Object(A.jsx)("div",{className:"home__card__loading",children:"loading..."})]})})]})}}}]);