(this["webpackJsonpperformance-optimization"]=this["webpackJsonpperformance-optimization"]||[]).push([[9],{405:function(e,n,t){},406:function(e,n,t){},758:function(e,n,t){"use strict";t.r(n);var o=t(89),r=t.n(o),a=t(317),s=t(84),c=(t(405),t(753)),i=t(732),u=(t(406),t(734)),l=t(0),m=t(2);function p(e){var n=e.content,t=e.startLine,o=e.endLine;return Object(m.jsx)("div",{className:"editor",children:Object(m.jsx)(u.a,{language:"javascript",theme:"vs",value:n,options:{readOnly:!0},editorDidMount:function(e){"number"===typeof t&&"number"===typeof o&&(t>o||e.deltaDecorations([],[{range:new u.b.Range(t,1,o,1),options:{isWholeLine:!0,className:"editor--hightlight"}}]))}})})}var b=Object(l.memo)(p),f=new Map;f.set("page",'/* eslint-disable no-unused-vars */\nimport "./index.scss";\nimport { Tabs, Button } from "antd";\nimport Editor from "./component/Editor";\nimport { readFileContent } from "./util";\nimport { useEffect, useState } from "react";\nimport { getFileContentFromUrl } from "@/util";\n\nconst { TabPane } = Tabs;\n\nfunction Sourcemap() {\n  console.log("render sourcemap");\n  const [lineNo, setLineNo] = useState(-1);\n  const [columnNo, setColumnNo] = useState(-1);\n  const [url, setUrl] = useState("");\n  const [result, setResult] = useState("");\n  useEffect(() => {\n    window.onerror = function (msg, url, lineNo, columnNo) {\n      setLineNo(lineNo);\n      setColumnNo(columnNo);\n      setUrl(url);\n      return false;\n    };\n  }, []);\n  useEffect(async () => {\n    if (lineNo < 0 || columnNo < 0 || !url) {\n      return;\n    }\n    console.log("2", lineNo, columnNo, url);\n    const mapContent = await getFileContentFromUrl(`${url}.map`);\n    sourceMap.SourceMapConsumer.with(mapContent, null, (consumer) => {\n      const res = consumer.originalPositionFor({\n        line: lineNo,\n        column: columnNo,\n      });\n      console.log(3, consumer.sourceContentFor(res.source));\n      setResult(JSON.stringify(res));\n    });\n    return () => {};\n  }, [lineNo, columnNo, url]);\n  function onClickTest_1() {\n    throw new Error("test 1...");\n  }\n  return (\n    <div className="sourcemap">\n      <div className="sourcemap__desc">\n        <h1>\u8bf4\u660e</h1>\n        <p>\u6b64\u9875\u9762\u4ec5\u7528\u4e8e\u6d4b\u8bd5 source map \u529f\u80fd\u3002</p>\n      </div>\n      <Tabs defaultActiveKey="1" className="sourcemap__test">\n        <TabPane tab="\u6d4b\u8bd5\u7528\u4f8b 1" key="1">\n          <div>\n            <Button type="primary" className="sourcemap__test__btn" onClick={onClickTest_1}>\n              \u6d4b\u8bd5\n            </Button>\n            {!!result && result}\n          </div>\n          <Editor content={readFileContent("page")} className="sourcemap__test__editor" startLine={10} endLine={16} />\n        </TabPane>\n        <TabPane tab="\u6d4b\u8bd5\u7528\u4f8b 2" key="2">\n          Content of Tab Pane 2\n        </TabPane>\n        <TabPane tab="\u6d4b\u8bd5\u7528\u4f8b 3" key="3">\n          Content of Tab Pane 3\n        </TabPane>\n      </Tabs>\n    </div>\n  );\n}\n\nexport default Sourcemap;\n');var d=t(22);function j(e){return N.apply(this,arguments)}function N(){return(N=Object(a.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=c.a.TabPane;n.default=function(){console.log("render sourcemap");var e,n=Object(l.useState)(-1),t=Object(s.a)(n,2),o=t[0],u=t[1],p=Object(l.useState)(-1),d=Object(s.a)(p,2),N=d[0],O=d[1],v=Object(l.useState)(""),_=Object(s.a)(v,2),g=_[0],x=_[1],C=Object(l.useState)(""),w=Object(s.a)(C,2),T=w[0],y=w[1];return Object(l.useEffect)((function(){window.onerror=function(e,n,t,o){return u(t),O(o),x(n),!1}}),[]),Object(l.useEffect)(Object(a.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o<0||N<0)&&g){e.next=2;break}return e.abrupt("return");case 2:return console.log("2",o,N,g),e.next=5,j("".concat(g,".map"));case 5:return n=e.sent,sourceMap.SourceMapConsumer.with(n,null,(function(e){var n=e.originalPositionFor({line:o,column:N});console.log(3,e.sourceContentFor(n.source)),y(JSON.stringify(n))})),e.abrupt("return",(function(){}));case 8:case"end":return e.stop()}}),e)}))),[o,N,g]),Object(m.jsxs)("div",{className:"sourcemap",children:[Object(m.jsxs)("div",{className:"sourcemap__desc",children:[Object(m.jsx)("h1",{children:"\u8bf4\u660e"}),Object(m.jsx)("p",{children:"\u6b64\u9875\u9762\u4ec5\u7528\u4e8e\u6d4b\u8bd5 source map \u529f\u80fd\u3002"})]}),Object(m.jsxs)(c.a,{defaultActiveKey:"1",className:"sourcemap__test",children:[Object(m.jsxs)(h,{tab:"\u6d4b\u8bd5\u7528\u4f8b 1",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(i.a,{type:"primary",className:"sourcemap__test__btn",onClick:function(){throw new Error("test 1...")},children:"\u6d4b\u8bd5"}),!!T&&T]}),Object(m.jsx)(b,{content:(e="page",f.has(e)?f.get(e):""),className:"sourcemap__test__editor",startLine:10,endLine:16})]},"1"),Object(m.jsx)(h,{tab:"\u6d4b\u8bd5\u7528\u4f8b 2",children:"Content of Tab Pane 2"},"2"),Object(m.jsx)(h,{tab:"\u6d4b\u8bd5\u7528\u4f8b 3",children:"Content of Tab Pane 3"},"3")]})]})}}}]);
//# sourceMappingURL=9.e301d243.chunk.js.map