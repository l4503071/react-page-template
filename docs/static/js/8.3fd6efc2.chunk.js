(this["webpackJsonpperformance-optimization"]=this["webpackJsonpperformance-optimization"]||[]).push([[8],{443:function(e,n,t){},444:function(e,n,t){},445:function(e,n,t){},800:function(e,n,t){"use strict";t.r(n);var r=t(12),c=t.n(r),a=t(25),i=t(3),o=(t(443),t(796)),s=t(34),l=t(97),u=(t(444),t(0)),b=t(779),j=t(797),d=t(775),m=t(798),f=(t(445),t(776)),O=t(1);function p(e){var n=e.content,t=e.startLine,r=e.endLine,c=Object(u.useRef)(null);function a(e){e&&"number"===typeof t&&"number"===typeof r&&(t>r||setTimeout((function(){e.deltaDecorations([],[{range:new f.b.Range(t,1,r,1),options:{isWholeLine:!0,className:"editor--hightlight"}}]),e.revealLineInCenter(Math.ceil((t+r)/2))}),300))}return Object(u.useEffect)((function(){a(c.current)}),[n,t,r]),Object(O.jsx)("div",{className:"editor",children:Object(O.jsx)(f.a,{language:"javascript",theme:"vs",value:n,options:{readOnly:!0},editorDidMount:function(e){c.current=e,a(c.current)}})})}var h=Object(u.memo)(p);function v(e){var n=e.name,t=e.desc,r=e.code,c=e.startLine,a=e.endLine,i=e.onTrigger,o=e.onAnalyze,f=e.onInputChange,p=e.errorInfo,v=e.errorResult,x=Object(u.useState)(1),_=Object(l.a)(x,2),g=_[0],y=_[1];function N(e){var t=e.target,r=t.id,c=t.value;"function"===typeof f&&f(n,Object(s.a)({},r,c))}function w(e){if(!(null===p||void 0===p?void 0:p.error))return b.b.warning("\u8bf7\u5148\u89e6\u53d1\u9519\u8bef.");var n=null===p||void 0===p?void 0:p.error.split("\n"),t=n[g],r=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i.exec(t),c=Object(l.a)(r,5),a=c[2],i=c[3],o=c[4];return N({target:{id:"url",value:a}}),N({target:{id:"lineNo",value:i}}),N({target:{id:"columnNo",value:o}}),e&&g>=n.length-1?b.b.warning("\u5df2\u662f\u6700\u540e\u4e00\u4e2a\u9519\u8bef."):!e&&g<=1?b.b.warning("\u5df2\u662f\u7b2c\u4e00\u4e2a\u9519\u8bef."):void y(e?g+1:g-1)}return Object(O.jsxs)("div",{className:"errortab",children:[Object(O.jsxs)(j.a,{layout:"vertical",children:[Object(O.jsx)(j.a.Item,{label:"\u7528\u4f8b\u8bf4\u660e",children:t}),Object(O.jsx)(j.a.Item,{label:"\u4ee3\u7801\u793a\u4f8b",children:Object(O.jsx)("div",{className:"errortab__code",children:Object(O.jsx)(h,{content:r,startLine:c,endLine:a},"result")})})]}),Object(O.jsxs)("div",{className:"errortab__info",children:[Object(O.jsxs)("div",{className:"errortab__info__left",children:[Object(O.jsxs)("div",{className:"errortab__info__btn",children:[Object(O.jsx)(d.a,{type:"primary",onClick:function(){"function"===typeof i&&i(n)},children:"\u89e6\u53d1\u9519\u8bef"}),Object(O.jsx)(d.a,{type:"primary",onClick:w.bind(null,!1),children:"\u5b9a\u4f4d\u4e0a\u4e00\u4e2a\u9519\u8bef\u6587\u4ef6"}),Object(O.jsx)(d.a,{type:"primary",onClick:w.bind(null,!0),children:"\u5b9a\u4f4d\u4e0b\u4e00\u4e2a\u9519\u8bef\u6587\u4ef6"})]}),Object(O.jsxs)("div",{className:"errortab__info__btn",children:["\u5f53\u524d\u9519\u8bef\u7d22\u5f15: ",g]}),Object(O.jsxs)(j.a,{children:[Object(O.jsx)(j.a.Item,{label:"\u9519\u8bef\u4fe1\u606f",children:Object(O.jsx)(m.a,{value:p.msg,disabled:!0})}),Object(O.jsx)(j.a.Item,{label:"\u9519\u8bef\u884c\u6570",children:Object(O.jsx)(m.a,{value:p.lineNo,onChange:N,id:"lineNo",disabled:!0})}),Object(O.jsx)(j.a.Item,{label:"\u9519\u8bef\u5217\u6570",children:Object(O.jsx)(m.a,{value:p.columnNo,onChange:N,id:"columnNo",disabled:!0})}),Object(O.jsx)(j.a.Item,{label:"\u9519\u8bef\u6587\u4ef6",children:Object(O.jsx)(m.a,{value:p.url,onChange:N,id:"url",disabled:!0})}),Object(O.jsx)(j.a.Item,{label:"\u9519\u8bef\u5806\u6808",children:Object(O.jsx)(m.a.TextArea,{value:p.error,rows:12,disabled:!0})})]})]}),Object(O.jsxs)("div",{className:"errortab__info__right",children:[Object(O.jsx)("div",{className:"errortab__info__btn",children:Object(O.jsx)(d.a,{type:"primary",onClick:function(){"function"===typeof o&&o(n)},children:"\u89e3\u6790 sourcemap"})}),Object(O.jsx)("div",{className:"errortab__info__edtior",children:Object(O.jsx)(h,{content:v.content,startLine:v.line,endLine:v.line},"result")})]})]})]})}var x=Object(u.memo)(v),_=t(10),g=t(49),y=t(35);function N(e){return w.apply(this,arguments)}function w(){return(w=Object(a.a)(c.a.mark((function e(n){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.d)("".concat(n.url,".map"));case 2:return t=e.sent,e.abrupt("return",new Promise((function(e){sourceMap.SourceMapConsumer.with(t,null,(function(t){var r=t.originalPositionFor({line:Number(n.lineNo),column:Number(n.columnNo)}),c=t.sourceContentFor(r.source);e(Object(i.a)({content:c},r))}))})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=o.a.TabPane;n.default=function(){console.log("render sourcemap");var e=Object(_.c)((function(e){return e.sourcemap.tabConfigList})),n=Object(_.b)(),t=function(){var e=Object(u.useState)({}),n=Object(l.a)(e,2),t=n[0],r=n[1];return Object(u.useEffect)((function(){window.onerror=function(e,n,t,c,a){return r({msg:e,url:n,lineNo:t,columnNo:c,error:a.stack,name:a.message}),!1},window.onunhandledrejection=function(e){var n=e.reason;r({msg:n.message,url:"",lineNo:"",error:n.stack,name:n.message})}}),[]),{error:t}}(),r=t.error;function s(e){if("test_1"===e)throw new Error("test_1");"test_2"===e&&new Promise((function(){throw new Error("test_2")}))}function b(e){return j.apply(this,arguments)}function j(){return(j=Object(a.a)(c.a.mark((function t(r){var a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.find((function(e){return e.key===r})),t.next=3,N(a.errorInfo);case 3:o=t.sent,n(Object(g.b)({key:r,props:{errorResult:Object(i.a)({},o)}}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(e,t){n(Object(g.c)({key:r.name,props:t}))}return Object(u.useEffect)((function(){n(Object(g.b)({key:r.name,props:{errorInfo:Object(i.a)({},r)}}))}),[r]),Object(O.jsxs)("div",{className:"sourcemap",children:[Object(O.jsxs)("div",{className:"sourcemap__desc",children:[Object(O.jsx)("h1",{children:"\u8bf4\u660e"}),Object(O.jsx)("p",{children:"\u6b64\u9875\u9762\u4ec5\u7528\u4e8e\u6d4b\u8bd5 source map \u529f\u80fd\u3002"})]}),Object(O.jsx)(o.a,{defaultActiveKey:"test_1",className:"sourcemap__test",children:e.map((function(e){return Object(O.jsx)(k,{tab:e.name,children:Object(O.jsx)(x,Object(i.a)(Object(i.a)({},e),{},{name:e.key,onTrigger:s,onAnalyze:b,onInputChange:d}))},e.key)}))})]})}}}]);