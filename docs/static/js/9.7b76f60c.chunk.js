(this["webpackJsonpperformance-optimization"]=this["webpackJsonpperformance-optimization"]||[]).push([[9],{405:function(n,e,t){},406:function(n,e,t){},758:function(n,e,t){"use strict";t.r(e);var o=t(89),r=t.n(o),a=t(317),s=t(84),c=(t(405),t(753)),i=t(732),u=(t(406),t(734)),l=t(0),m=t(2);function p(n){var e=n.content,t=n.startLine,o=n.endLine;return Object(m.jsx)("div",{className:"editor",children:Object(m.jsx)(u.a,{language:"javascript",theme:"vs",value:e,options:{readOnly:!0},editorDidMount:function(n){"number"===typeof t&&"number"===typeof o&&(t>o||n.deltaDecorations([],[{range:new u.b.Range(t,1,o,1),options:{isWholeLine:!0,className:"editor--hightlight"}}]))}})})}var b=Object(l.memo)(p),f=new Map;f.set("page",'/* eslint-disable no-unused-vars */\nimport "./index.scss";\nimport { Tabs, Button } from "antd";\nimport Editor from "./component/Editor";\nimport { readFileContent } from "./util";\nimport { useEffect, useState } from "react";\nimport { getFileContentFromUrl } from "@/util";\n\nconst { TabPane } = Tabs;\n\nfunction Sourcemap() {\n  console.log("render sourcemap");\n  const [lineNo, setLineNo] = useState(-1);\n  const [columnNo, setColumnNo] = useState(-1);\n  const [url, setUrl] = useState("");\n  const [result, setResult] = useState("");\n  useEffect(() => {\n    window.onerror = function (msg, url, lineNo, columnNo) {\n      console.log("1", lineNo, columnNo, url);\n      setLineNo(lineNo);\n      setColumnNo(columnNo);\n      setUrl(url);\n      return false;\n    };\n  }, []);\n  useEffect(async () => {\n    console.log("2", lineNo, columnNo, url);\n    if (lineNo < 0 || columnNo < 0 || !url) {\n      return;\n    }\n    const mapContent = await getFileContentFromUrl(`${url}.map`);\n    sourceMap.SourceMapConsumer.with(mapContent, null, (consumer) => {\n      // console.log(consumer.originalPositionFor({\n      //   line: lineNo,\n      //   column: columnNo,\n      // }));\n      setResult(\n        JSON.stringify(\n          consumer.originalPositionFor({\n            line: lineNo,\n            column: columnNo,\n          })\n        )\n      );\n    });\n    return () => {};\n  }, [lineNo, columnNo, url]);\n  function onClickTest_1() {\n    throw new Error("test 1...");\n  }\n  return (\n    <div className="sourcemap">\n      <div className="sourcemap__desc">\n        <h1>\u8bf4\u660e</h1>\n        <p>\u6b64\u9875\u9762\u4ec5\u7528\u4e8e\u6d4b\u8bd5 source map \u529f\u80fd\u3002</p>\n      </div>\n      <Tabs defaultActiveKey="1" className="sourcemap__test">\n        <TabPane tab="\u6d4b\u8bd5\u7528\u4f8b 1" key="1">\n          <div>\n            <Button type="primary" className="sourcemap__test__btn" onClick={onClickTest_1}>\n              \u6d4b\u8bd5\n            </Button>\n            {!!result && result}\n          </div>\n          <Editor content={readFileContent("page")} className="sourcemap__test__editor" startLine={10} endLine={16} />\n        </TabPane>\n        <TabPane tab="\u6d4b\u8bd5\u7528\u4f8b 2" key="2">\n          Content of Tab Pane 2\n        </TabPane>\n        <TabPane tab="\u6d4b\u8bd5\u7528\u4f8b 3" key="3">\n          Content of Tab Pane 3\n        </TabPane>\n      </Tabs>\n    </div>\n  );\n}\n\nexport default Sourcemap;\n');var d=t(22);function j(n){return N.apply(this,arguments)}function N(){return(N=Object(a.a)(r.a.mark((function n(e){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.get(e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var h=c.a.TabPane;e.default=function(){console.log("render sourcemap");var n,e=Object(l.useState)(-1),t=Object(s.a)(e,2),o=t[0],u=t[1],p=Object(l.useState)(-1),d=Object(s.a)(p,2),N=d[0],O=d[1],g=Object(l.useState)(""),_=Object(s.a)(g,2),v=_[0],x=_[1],w=Object(l.useState)(""),C=Object(s.a)(w,2),T=C[0],y=C[1];return Object(l.useEffect)((function(){window.onerror=function(n,e,t,o){return console.log("1",t,o,e),u(t),O(o),x(e),!1}}),[]),Object(l.useEffect)(Object(a.a)(r.a.mark((function n(){var e;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("2",o,N,v),!(o<0||N<0)&&v){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,j("".concat(v,".map"));case 5:return e=n.sent,sourceMap.SourceMapConsumer.with(e,null,(function(n){y(JSON.stringify(n.originalPositionFor({line:o,column:N})))})),n.abrupt("return",(function(){}));case 8:case"end":return n.stop()}}),n)}))),[o,N,v]),Object(m.jsxs)("div",{className:"sourcemap",children:[Object(m.jsxs)("div",{className:"sourcemap__desc",children:[Object(m.jsx)("h1",{children:"\u8bf4\u660e"}),Object(m.jsx)("p",{children:"\u6b64\u9875\u9762\u4ec5\u7528\u4e8e\u6d4b\u8bd5 source map \u529f\u80fd\u3002"})]}),Object(m.jsxs)(c.a,{defaultActiveKey:"1",className:"sourcemap__test",children:[Object(m.jsxs)(h,{tab:"\u6d4b\u8bd5\u7528\u4f8b 1",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(i.a,{type:"primary",className:"sourcemap__test__btn",onClick:function(){throw new Error("test 1...")},children:"\u6d4b\u8bd5"}),!!T&&T]}),Object(m.jsx)(b,{content:(n="page",f.has(n)?f.get(n):""),className:"sourcemap__test__editor",startLine:10,endLine:16})]},"1"),Object(m.jsx)(h,{tab:"\u6d4b\u8bd5\u7528\u4f8b 2",children:"Content of Tab Pane 2"},"2"),Object(m.jsx)(h,{tab:"\u6d4b\u8bd5\u7528\u4f8b 3",children:"Content of Tab Pane 3"},"3")]})]})}}}]);
//# sourceMappingURL=9.7b76f60c.chunk.js.map