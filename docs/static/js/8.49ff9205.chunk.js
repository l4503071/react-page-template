(this["webpackJsonpperformance-optimization"]=this["webpackJsonpperformance-optimization"]||[]).push([[8],{418:function(e,n,t){},419:function(e,n,t){},420:function(e,n,t){},768:function(e,n,t){"use strict";t.r(n);var r=t(93),c=t.n(r),a=t(275),o=t(6),s=(t(418),t(765)),i=t(28),u=(t(419),t(0)),l=t(764),j=t(747),b=t(766),f=(t(420),t(748)),m=t(1);function d(e){var n=e.content,t=e.startLine,r=e.endLine,c=Object(u.useRef)(null);function a(e){e&&"number"===typeof t&&"number"===typeof r&&(t>r||setTimeout((function(){e.deltaDecorations([],[{range:new f.b.Range(t,1,r,1),options:{isWholeLine:!0,className:"editor--hightlight"}}]),e.revealLineInCenter(Math.ceil((t+r)/2))}),300))}return Object(u.useEffect)((function(){a(c.current)}),[n,t,r]),Object(m.jsx)("div",{className:"editor",children:Object(m.jsx)(f.a,{language:"javascript",theme:"vs",value:n,options:{readOnly:!0},editorDidMount:function(e){c.current=e,a(c.current)}})})}var p=Object(u.memo)(d);function O(e){var n=e.name,t=e.desc,r=e.code,c=e.startLine,a=e.endLine,o=e.onTrigger,s=e.onAnalyze,u=e.onInputChange,f=e.errorInfo,d=e.errorResult;function O(e){var t=e.target,r=t.id,c=t.value;"function"===typeof u&&u(n,Object(i.a)({},r,c))}return Object(m.jsxs)("div",{className:"errortab",children:[Object(m.jsxs)(l.a,{layout:"vertical",children:[Object(m.jsx)(l.a.Item,{label:"\u7528\u4f8b\u8bf4\u660e",children:t}),Object(m.jsx)(l.a.Item,{label:"\u4ee3\u7801\u793a\u4f8b",children:Object(m.jsx)("div",{className:"errortab__code",children:Object(m.jsx)(p,{content:r,startLine:c,endLine:a},"result")})})]}),Object(m.jsxs)("div",{className:"errortab__info",children:[Object(m.jsxs)("div",{className:"errortab__info__left",children:[Object(m.jsx)(j.a,{type:"primary",onClick:function(){"function"===typeof o&&o(n)},className:"errortab__info__btn",children:"\u89e6\u53d1\u9519\u8bef"}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(l.a.Item,{label:"\u9519\u8bef\u4fe1\u606f",children:Object(m.jsx)(b.a,{value:f.msg,disabled:!0})}),Object(m.jsx)(l.a.Item,{label:"\u9519\u8bef\u884c\u6570",children:Object(m.jsx)(b.a,{value:f.lineNo,onChange:O,id:"lineNo"})}),Object(m.jsx)(l.a.Item,{label:"\u9519\u8bef\u5217\u6570",children:Object(m.jsx)(b.a,{value:f.columnNo,onChange:O,id:"columnNo"})}),Object(m.jsx)(l.a.Item,{label:"\u9519\u8bef\u6587\u4ef6",children:Object(m.jsx)(b.a,{value:f.url,onChange:O,id:"url"})}),Object(m.jsx)(l.a.Item,{label:"\u9519\u8bef\u5806\u6808",children:Object(m.jsx)(b.a.TextArea,{value:f.error,rows:12})})]})]}),Object(m.jsxs)("div",{className:"errortab__info__right",children:[Object(m.jsx)(j.a,{type:"primary",onClick:function(){"function"===typeof s&&s(n)},className:"errortab__info__btn",children:"\u89e3\u6790 sourcemap"}),Object(m.jsx)("div",{className:"errortab__info__edtior",children:Object(m.jsx)(p,{content:d.content,startLine:d.line,endLine:d.line},"result")})]})]})]})}var h=Object(u.memo)(O),x=t(88),v=t(10),_=t(41),g=t(29);function y(e){return N.apply(this,arguments)}function N(){return(N=Object(a.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=Object(a.a)(c.a.mark((function e(n){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("".concat(n.url,".map"));case 2:return t=e.sent,e.abrupt("return",new Promise((function(e){sourceMap.SourceMapConsumer.with(t,null,(function(t){var r=t.originalPositionFor({line:Number(n.lineNo),column:Number(n.columnNo)}),c=t.sourceContentFor(r.source);e(Object(o.a)({content:c},r))}))})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=s.a.TabPane;n.default=function(){console.log("render sourcemap");var e=Object(v.c)((function(e){return e.sourcemap.tabConfigList})),n=Object(v.b)(),t=function(){var e=Object(u.useState)({}),n=Object(x.a)(e,2),t=n[0],r=n[1];return Object(u.useEffect)((function(){window.onerror=function(e,n,t,c,a){return r({msg:e,url:n,lineNo:t,columnNo:c,error:a.stack,name:a.message}),!1},window.onunhandledrejection=function(e){var n=e.reason;r({msg:n.message,url:"",lineNo:"",error:n.stack,name:n.message})}}),[]),{error:t}}(),r=t.error;function i(e){if("test_1"===e)throw new Error("test_1");"test_2"===e&&new Promise((function(){throw new Error("test_2")}))}function l(e){return j.apply(this,arguments)}function j(){return(j=Object(a.a)(c.a.mark((function t(r){var a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.find((function(e){return e.key===r})),t.next=3,w(a.errorInfo);case 3:s=t.sent,n(Object(_.b)({key:r,props:{errorResult:Object(o.a)({},s)}}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t,c){var a=e.find((function(e){return e.key===t}));n(Object(_.b)({key:r.name,props:{errorInfo:Object(o.a)(Object(o.a)({},a.errorInfo),c)}}))}return Object(u.useEffect)((function(){n(Object(_.b)({key:r.name,props:{errorInfo:Object(o.a)({},r)}}))}),[r]),Object(m.jsxs)("div",{className:"sourcemap",children:[Object(m.jsxs)("div",{className:"sourcemap__desc",children:[Object(m.jsx)("h1",{children:"\u8bf4\u660e"}),Object(m.jsx)("p",{children:"\u6b64\u9875\u9762\u4ec5\u7528\u4e8e\u6d4b\u8bd5 source map \u529f\u80fd\u3002"})]}),Object(m.jsx)(s.a,{defaultActiveKey:"test_2",className:"sourcemap__test",children:e.map((function(e){return Object(m.jsx)(I,{tab:e.name,children:Object(m.jsx)(h,Object(o.a)(Object(o.a)({},e),{},{name:e.key,onTrigger:i,onAnalyze:l,onInputChange:b}))},e.key)}))})]})}}}]);