(this["webpackJsonpperformance-optimization"]=this["webpackJsonpperformance-optimization"]||[]).push([[8],{279:function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"a",(function(){return u}));var r=t(97),c=t.n(r),a=t(239),o=t(17);function i(e){return s.apply(this,arguments)}function s(){return(s=Object(a.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(c.a.mark((function e(n){var t,r,a,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.split("/").pop().split("?")[0],e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.blob();case 6:a=e.sent,o=URL.createObjectURL(a),(i=document.createElement("a")).href=o,i.download=t,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},437:function(e,n,t){},438:function(e,n,t){},439:function(e,n,t){},791:function(e,n,t){"use strict";t.r(n);var r=t(97),c=t.n(r),a=t(239),o=t(3),i=(t(437),t(787)),s=t(32),u=t(93),l=(t(438),t(0)),b=t(772),d=t(788),j=t(768),f=t(790),p=(t(439),t(769)),m=t(1);function h(e){var n=e.content,t=e.startLine,r=e.endLine,c=Object(l.useRef)(null);function a(e){e&&"number"===typeof t&&"number"===typeof r&&(t>r||setTimeout((function(){e.deltaDecorations([],[{range:new p.b.Range(t,1,r,1),options:{isWholeLine:!0,className:"editor--hightlight"}}]),e.revealLineInCenter(Math.ceil((t+r)/2))}),300))}return Object(l.useEffect)((function(){a(c.current)}),[n,t,r]),Object(m.jsx)("div",{className:"editor",children:Object(m.jsx)(p.a,{language:"javascript",theme:"vs",value:n,options:{readOnly:!0},editorDidMount:function(e){c.current=e,a(c.current)}})})}var O=Object(l.memo)(h);function v(e){var n=e.name,t=e.desc,r=e.code,c=e.startLine,a=e.endLine,o=e.onTrigger,i=e.onAnalyze,p=e.onInputChange,h=e.errorInfo,v=e.errorResult,x=Object(l.useState)(1),y=Object(u.a)(x,2),_=y[0],g=y[1];function w(e){var t=e.target,r=t.id,c=t.value;"function"===typeof p&&p(n,Object(s.a)({},r,c))}function N(e){if(!(null===h||void 0===h?void 0:h.error))return b.b.warning("\u8bf7\u5148\u89e6\u53d1\u9519\u8bef.");var n=null===h||void 0===h?void 0:h.error.split("\n"),t=n[_],r=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i.exec(t),c=Object(u.a)(r,5),a=c[2],o=c[3],i=c[4];return w({target:{id:"url",value:a}}),w({target:{id:"lineNo",value:o}}),w({target:{id:"columnNo",value:i}}),e&&_>=n.length-1?b.b.warning("\u5df2\u662f\u6700\u540e\u4e00\u4e2a\u9519\u8bef."):!e&&_<=1?b.b.warning("\u5df2\u662f\u7b2c\u4e00\u4e2a\u9519\u8bef."):void g(e?_+1:_-1)}return Object(m.jsxs)("div",{className:"errortab",children:[Object(m.jsxs)(d.a,{layout:"vertical",children:[Object(m.jsx)(d.a.Item,{label:"\u7528\u4f8b\u8bf4\u660e",children:t}),Object(m.jsx)(d.a.Item,{label:"\u4ee3\u7801\u793a\u4f8b",children:Object(m.jsx)("div",{className:"errortab__code",children:Object(m.jsx)(O,{content:r,startLine:c,endLine:a},"result")})})]}),Object(m.jsxs)("div",{className:"errortab__info",children:[Object(m.jsxs)("div",{className:"errortab__info__left",children:[Object(m.jsxs)("div",{className:"errortab__info__btn",children:[Object(m.jsx)(j.a,{type:"primary",onClick:function(){"function"===typeof o&&o(n)},children:"\u89e6\u53d1\u9519\u8bef"}),Object(m.jsx)(j.a,{type:"primary",onClick:N.bind(null,!1),children:"\u5b9a\u4f4d\u4e0a\u4e00\u4e2a\u9519\u8bef\u6587\u4ef6"}),Object(m.jsx)(j.a,{type:"primary",onClick:N.bind(null,!0),children:"\u5b9a\u4f4d\u4e0b\u4e00\u4e2a\u9519\u8bef\u6587\u4ef6"})]}),Object(m.jsxs)("div",{className:"errortab__info__btn",children:["\u5f53\u524d\u9519\u8bef\u7d22\u5f15: ",_]}),Object(m.jsxs)(d.a,{children:[Object(m.jsx)(d.a.Item,{label:"\u9519\u8bef\u4fe1\u606f",children:Object(m.jsx)(f.a,{value:h.msg,disabled:!0})}),Object(m.jsx)(d.a.Item,{label:"\u9519\u8bef\u884c\u6570",children:Object(m.jsx)(f.a,{value:h.lineNo,onChange:w,id:"lineNo",disabled:!0})}),Object(m.jsx)(d.a.Item,{label:"\u9519\u8bef\u5217\u6570",children:Object(m.jsx)(f.a,{value:h.columnNo,onChange:w,id:"columnNo",disabled:!0})}),Object(m.jsx)(d.a.Item,{label:"\u9519\u8bef\u6587\u4ef6",children:Object(m.jsx)(f.a,{value:h.url,onChange:w,id:"url",disabled:!0})}),Object(m.jsx)(d.a.Item,{label:"\u9519\u8bef\u5806\u6808",children:Object(m.jsx)(f.a.TextArea,{value:h.error,rows:12,disabled:!0})})]})]}),Object(m.jsxs)("div",{className:"errortab__info__right",children:[Object(m.jsx)("div",{className:"errortab__info__btn",children:Object(m.jsx)(j.a,{type:"primary",onClick:function(){"function"===typeof i&&i(n)},children:"\u89e3\u6790 sourcemap"})}),Object(m.jsx)("div",{className:"errortab__info__edtior",children:Object(m.jsx)(O,{content:v.content,startLine:v.line,endLine:v.line},"result")})]})]})]})}var x=Object(l.memo)(v),y=t(10),_=t(46),g=t(279);function w(e){return N.apply(this,arguments)}function N(){return(N=Object(a.a)(c.a.mark((function e(n){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.b)("".concat(n.url,".map"));case 2:return t=e.sent,e.abrupt("return",new Promise((function(e){sourceMap.SourceMapConsumer.with(t,null,(function(t){var r=t.originalPositionFor({line:Number(n.lineNo),column:Number(n.columnNo)}),c=t.sourceContentFor(r.source);e(Object(o.a)({content:c},r))}))})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=i.a.TabPane;n.default=function(){console.log("render sourcemap");var e=Object(y.c)((function(e){return e.sourcemap.tabConfigList})),n=Object(y.b)(),t=function(){var e=Object(l.useState)({}),n=Object(u.a)(e,2),t=n[0],r=n[1];return Object(l.useEffect)((function(){window.onerror=function(e,n,t,c,a){return r({msg:e,url:n,lineNo:t,columnNo:c,error:a.stack,name:a.message}),!1},window.onunhandledrejection=function(e){var n=e.reason;r({msg:n.message,url:"",lineNo:"",error:n.stack,name:n.message})}}),[]),{error:t}}(),r=t.error;function s(e){if("test_1"===e)throw new Error("test_1");"test_2"===e&&new Promise((function(){throw new Error("test_2")}))}function b(e){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(c.a.mark((function t(r){var a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.find((function(e){return e.key===r})),t.next=3,w(a.errorInfo);case 3:i=t.sent,n(Object(_.b)({key:r,props:{errorResult:Object(o.a)({},i)}}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(e,t){n(Object(_.c)({key:r.name,props:t}))}return Object(l.useEffect)((function(){n(Object(_.b)({key:r.name,props:{errorInfo:Object(o.a)({},r)}}))}),[r]),Object(m.jsxs)("div",{className:"sourcemap",children:[Object(m.jsxs)("div",{className:"sourcemap__desc",children:[Object(m.jsx)("h1",{children:"\u8bf4\u660e"}),Object(m.jsx)("p",{children:"\u6b64\u9875\u9762\u4ec5\u7528\u4e8e\u6d4b\u8bd5 source map \u529f\u80fd\u3002"})]}),Object(m.jsx)(i.a,{defaultActiveKey:"test_1",className:"sourcemap__test",children:e.map((function(e){return Object(m.jsx)(k,{tab:e.name,children:Object(m.jsx)(x,Object(o.a)(Object(o.a)({},e),{},{name:e.key,onTrigger:s,onAnalyze:b,onInputChange:j}))},e.key)}))})]})}}}]);